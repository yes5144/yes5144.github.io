(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{430:function(s,a,n){"use strict";n.r(a);var t=n(42),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"zabbix"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zabbix"}},[s._v("#")]),s._v(" Zabbix")]),s._v(" "),n("h3",{attrs:{id:"安装zabbix-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装zabbix-server"}},[s._v("#")]),s._v(" 安装zabbix-server")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zabbix-server-mysql\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zabbix-web-mysql\nzcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql -uzabbix -p zabbix\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/zabbix/\n\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zabbix-agent\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" zabbix_agentd.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(",.default"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -vE ^"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zabbix_agentd.conf.default |grep - -vE ^$ >zabbix_agentd.conf")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -vE ^"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zabbix_agentd.conf.default |grep -vE ^$ >zabbix_agentd.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" zabbix_agentd.conf\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" zabbix_server.conf zabbix_server.conf.default\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -vE ^"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zabbix_server.conf.default  |grep -vE ^$ >zabbix_server.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" zabbix_server.conf\n\nshell"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysql -uroot -p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" create database zabbix character "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" utf8 collate utf8_bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all privileges on zabbix.* to zabbix@localhost identified by "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<password>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" quit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h3",{attrs:{id:"安装zabbix-proxy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装zabbix-proxy"}},[s._v("#")]),s._v(" 安装zabbix-proxy")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" zabbix\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v("  -M -s /sbin/nologin zabbix"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /opt/log/zabbix "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" zabbix.zabbix /opt/log/zabbix "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /opt/run "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /opt/run\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh http://repo.zabbix.com/zabbix/3.2/rhel/6/x86_64/zabbix-release-3.2-1.el6.noarch.rpm\nyum  makecache\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zabbix-proxy-mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ql zabbix-proxy-mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("  /etc/zabbix/zabbix_proxy.conf\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("\n\nll /usr/share/doc/zabbix-proxy-mysql-3.2.11/schema.sql.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\ngrant all on zabbix_proxy.* to zabbix@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'172.20.16.11'")]),s._v(" identified by "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zabbix'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ncreate database zabbix_proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql -uzabbix -h172.20.16.10 -P3306 zabbix_proxy -p\n\nzcat /usr/share/doc/zabbix-proxy-mysql-3.2.11/schema.sql.gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("mysql -uzabbix -h172.20.16.10 -P63306 zabbix_proxy -p\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -Ev "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^$|^[#;]"')]),s._v(" /etc/zabbix/zabbix_proxy.conf\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/zabbix/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" zabbix_proxy.conf zabbix_proxy.conf.default\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zabbix_proxy.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);