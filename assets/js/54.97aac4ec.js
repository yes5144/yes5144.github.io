(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{404:function(s,l,t){"use strict";t.r(l);var n=t(42),a=Object(n.a)({},(function(){var s=this,l=s.$createElement,t=s._self._c||l;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"mysql-慢日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-慢日志"}},[s._v("#")]),s._v(" mysql 慢日志")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('https://www.cnblogs.com/NiceTime/p/6662939.html\n\nslow_query_log_file=/opt/mysql/data/slow.log 需根据你安装的mysql慢查询日志路径为准。\n\n#执行时间最长的20条sql语句(默认按时长)\n[root@localhost mysqllog]# mysqlsla -lt slow --sort t_sum --top 20 /opt/mysql/data/slow.log\n\n#统计慢查询文件中所有select的慢查询sql，并显示执行时间最长的20条sql语句\n[root@localhost mysqllog]# mysqlsla -lt slow -sf "+select" -top 20 /opt/mysql/data/slow.log\n\n#统计慢查询文件中的数据库为test的所有select和update的慢查询sql，并查询次数最多的20条sql语句，并写到sql_num.log中\n[root@localhost mysqllog]# mysqlsla -lt slow -sf "+select,update" -top 20 -sort c_sum -db test /opt/mysql/data/slow.log >/usr/local/src/slow_ip_db_yymm.log\nmysqlsla -lt slow -sf "+select,insert,update,delete" -top 10 -sort t_sum -db tps138_com /tmp/logs/mysql-slow.log >/usr/local/src/slow_112_tps138_com_080901.log\n\n#mysqlsla输出格式说明:\nqueries total: 总查询次数,unique: 去重后的sql数量\nSorted by: 输出报表的内容排序\nCount : sql的执行次数及占总的slow log数量的百分比\nTime : 执行时间, 包括总时间, 平均时间, 最小, 最大时间, 时间占到总慢sql时间的百分比\n95% of Time : 去除最快和最慢的sql, 覆盖率占95%的sql的执行时间\nLock Time : 等待锁的时间\n95% of Lock : 95%的慢sql等待锁时间\nRows sent : 结果行统计数量, 包括平均, 最小, 最大数量\nRows examined : 扫描的行数量\nDatabase : 属于哪个数据库\nUsers : 哪个用户,IP,占到所有用户执行的sql百分比\nQuery abstract: 抽象后的sql语句\nQuery sample : sql样例语句\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])])])}),[],!1,null,null,null);l.default=a.exports}}]);